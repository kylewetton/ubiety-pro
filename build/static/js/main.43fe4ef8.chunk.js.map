{"version":3,"sources":["store/product/types.ts","utils/shapeTextureData.ts","utils/shapeSectionData.ts","store/product/reducers.ts","store/interface/types.ts","store/interface/reducers.ts","store/index.ts","config/worldConfig.tsx","config/cameraConfig.tsx","components/World/styles/WorldStyles.ts","store/product/selectors.ts","components/CustomMaterial/CustomMaterial.tsx","config/brandConfig.tsx","store/product/actions.ts","store/interface/actions.ts","store/interface/selectors.ts","components/Part/Part.tsx","components/Product/Product.tsx","config/cameraControlsConfig.tsx","components/CameraControls/CameraControls.tsx","components/World/World.tsx","store/product/thunks.ts","components/SwatchTray/styles/SwatchTrayStyles.ts","components/Swatch/styles/SwatchStyles.ts","components/Swatch/Swatch.tsx","components/SwatchTray/SwatchTray.tsx","theme/Preflight.ts","theme/spacing.ts","theme/radius.ts","theme/textSize.ts","theme/colors.ts","theme/boxShadow.ts","components/Selector/styles/SelectorStyles.ts","components/Icon/styles/IconStyles.ts","components/Icon/Icon.tsx","components/Selector/Selector.tsx","components/SectionSelector/SectionSelector.tsx","layout/ControlPanel/styles/ControlPanelStyles.ts","layout/ControlPanel/ControlPanel.tsx","components/ImageEditor/styles/ImageEditorStyles.ts","components/ImageUpload/styles/ImageUploadStyles.ts","components/ImageUpload/UploadFormlet.tsx","components/ImageUpload/ImageUpload.tsx","components/ImageUpload/UploadContainer.tsx","components/Button/styles/ButtonStyles.ts","components/Button/Button.tsx","layout/Modal/styles/ModalStyles.ts","layout/Modal/Modal.tsx","components/ImageEditor/ImageEditor.tsx","layout/SelectorTray/styles/SelectorTrayStyles.ts","layout/SelectorTray/SelectorTray.tsx","components/App/App.tsx","index.tsx"],"names":["PRODUCT_ADD_MESHPARTS","PRODUCT_SET_ACTIVE","PRODUCT_SET_TEXTURE","PRODUCT_SET_COLOR","PRODUCT_ADD_MATERIALS","PRODUCT_ADD_MODEL_DATA","PRODUCT_SET_CUSTOM_IMAGE","PRODUCT_APPLY_CUSTOM_IMAGE","PRODUCT_CLEAR_CUSTOM_IMAGE","shapeTextureData","data","isMaskedShadow","map","entry","uid","tag","title","src","maps","normalIntensity","flipY","swatches","metallic","roughness","id","slug","label","rendered","acf","texture_file","texture_maps_included","material_attributes","normal_intensity","repeat","shapeSectionData","section","idx","initial_material","initial_texture","it","ID","post_name","post_title","model_tag","name","available_materials","available_textures","at","current_material","length","active","color","initialState","loadingMeshParts","loadingModelData","loadingMaterials","meshParts","materials","sections","customImage","INTERFACE_UPDATE_POINTER","INTERFACE_TOGGLE_MODAL","pointer","x","y","modalIsOpen","customText","rootReducer","combineReducers","product","state","action","type","newSectionsWithMeshParts","newSec","payload","filter","part","meshPart","locked","parent","children","includes","meshByIdOrParentOrChildren","newSectionsNewActive","ns","material","newMaterial","newActiveSections","swatch","toLowerCase","newColorSections","model_file","shadow_file","shadow_material","activeSection","rest","newActive","custom_texture","interface","newModals","_map","modal","key","status","store","configureStore","reducer","spotlightIntensity","spotlightDistance","worldConfig","effects","worldOffset","lighting","position","intensity","mapSize","shadows","cameraConfig","fov","near","far","WorldDiv","styled","div","getAllProductMeshParts","getActiveProductPart","getAllSections","getActiveSection","getProductModelPath","getMaterialByUid","getProductCustomImage","CustomMaterial","customTexture","useSelector","useState","compedCustomTexture","setCompedCustomTexture","envMap","useCubeTexture","path","useEffect","customBlob","baseTexture","dimensions","proxy","document","createElement","width","height","Promise","res","rej","canvas","fabric","Canvas","setDimensions","Image","fromURL","filt","scaleToWidth","filters","BlendImage","image","mode","alpha","set","left","top","push","applyFilters","add","comped","toDataURL","fetch","then","u","blob","window","URL","createObjectURL","multiplyMaterialsTogether","paths","texture","Boolean","useTexture","textureObj","Object","assign","txt","wrapS","RepeatWrapping","wrapT","_handleMapVsCustom","indexOf","attach","aoMap","alphaMap","normalMap","normalScale","Vector2","transparent","shininess","onUpdate","self","needsUpdate","metalness","roughnessMap","brandConfig","hoverColor","parseName","split","join","productSetActivePart","productSetTextureToActive","productSetColorToActive","hex","productAddModelData","interfaceToggleModal","interfaceGetPointerPosition","Part","materialUid","mesh","dispatch","useDispatch","disabled","setDisabled","downX","downY","_handlePointerDown","e","clientX","clientY","Math","floor","_handlePointerUp","config","setTimeout","fallback","geometry","wireframe","onPointerDown","onPointerUp","castShadow","receiveShadow","Product","file","rotation","shadowMaterial","uuid","s","child","_filter","shadowMesh","cameraControlsConfig","enableDampening","dampeningFactor","enableZoom","maxPolarAngle","minPolarAngle","enablePan","extend","OrbitControls","CameraControls","useThree","camera","domElement","gl","controls","useRef","useFrame","current","update","ref","args","enableDamping","dampingFactor","MathUtils","degToRad","World","model","nodes","useGLTF","sceneId","productAddMeshParts","antialias","preserveDrawingBuffer","pixelRatio","devicePixelRatio","concurrent","raycaster","intersections","light","multisampling","luminanceInfluence","radius","scale","bias","distanceThreshold","distanceFalloff","rangeFalloff","mockProductData","require","mockTextureData","SwatchTrayDiv","SwatchDiv","props","Swatch","onClick","SwatchTray","ACTIVE_PRODUCT","ACTIVE_MATERIALS","SWATCHES","Preflight","createGlobalStyle","spacing","1","2","3","4","5","6","7","8","9","10","12","14","16","20","24","none","sm","md","full","textSize","xs","base","lg","xl","xxl","colors","white","blueGray","50","100","200","300","400","500","600","700","800","900","coolGray","gray","trueGray","warmGray","red","indigo","green","orange","rose","brand","blue","mint","boxShadow","xlTop","inner","input","_genSelectorTheme","SelectorDiv","SelectorMenu","SelectorTitle","space","SelectorArrows","SelectorArrow","SelectorList","ul","SelectorListItem","li","IconDiv","svgs","fill","xmlns","viewBox","d","right","menu","stroke","strokeWidth","strokeMiterlimit","strokeLinecap","check","Icon","icon","Selector","menuOpen","setMenuOpen","CURRENT","AVAILABLE","_handleCycleSelector","direction","findIndex","avail","_handleToggleMenu","prev","className","SectionSelector","ControlPanelDiv","ControlPanel","ImageEditorDiv","ImageEditorButtonTrayDiv","UploadArea","draggingOver","LabelPill","ErrorPanel","UploadFormlet","handleUpload","handleClick","target","value","onChange","files","style","display","htmlFor","ImageUpload","error","handleFileUpload","clearError","setDraggingOver","onDragOver","preventDefault","onDragEnter","onDragLeave","onDrop","dataTransfer","UploadContainer","uploadImage","setError","test","size","message","handleAllowedFiles","File","hasOwnProperty","url","_genButtonTheme","ButtonEl","button","big","Button","minimal","ModalDiv","ModalInnerDiv","Modal","isOpen","ImageEditor","editor","setEditor","uniq","customImageUrl","modalState","backgroundColor","dispose","_handleCloseCustomImageModal","_generateCustomTexture","multiplier","objectUrl","_handleUpload","_clearCustomTexture","_destroyCustomTexture","SelectorTrayDiv","SelectorTray","App","MODEL_PATH","getState","a","json","textures","catch","console","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.43fe4ef8.chunk.js","sourcesContent":["\n\n // action\n\nexport const PRODUCT_ADD_MESHPARTS = 'PRODUCT_ADD_MESHPARTS';\nexport const PRODUCT_SET_ACTIVE = 'PRODUCT_SET_ACTIVE';\nexport const PRODUCT_SET_TEXTURE = 'PRODUCT_SET_TEXTURE';\nexport const PRODUCT_SET_COLOR = 'PRODUCT_SET_COLOR';\nexport const PRODUCT_ADD_MATERIALS = 'PRODUCT_ADD_MATERIALS';\nexport const PRODUCT_ADD_MODEL_DATA = 'PRODUCT_ADD_MODEL_DATA';\nexport const PRODUCT_SET_CUSTOM_IMAGE = 'PRODUCT_SET_CUSTOM_IMAGE';\nexport const PRODUCT_APPLY_CUSTOM_IMAGE = 'PRODUCT_APPLY_CUSTOM_IMAGE';\nexport const PRODUCT_CLEAR_CUSTOM_IMAGE = 'PRODUCT_CLEAR_CUSTOM_IMAGE';\nexport const PRODUCT_DESTROY_ACTIVE_CUSTOM_IMAGE = 'PRODUCT_DESTROY_ACTIVE_CUSTOM_IMAGE';\n\ninterface productAction {\n    type: typeof PRODUCT_ADD_MESHPARTS\n    | typeof PRODUCT_SET_ACTIVE\n    | typeof PRODUCT_SET_TEXTURE\n    | typeof PRODUCT_SET_COLOR\n    | typeof PRODUCT_ADD_MATERIALS\n    | typeof PRODUCT_SET_CUSTOM_IMAGE\n    | typeof PRODUCT_APPLY_CUSTOM_IMAGE\n    | typeof PRODUCT_CLEAR_CUSTOM_IMAGE\n    | typeof PRODUCT_DESTROY_ACTIVE_CUSTOM_IMAGE\n    | typeof PRODUCT_ADD_MODEL_DATA,\n    payload: any\n}\n\nexport interface productPartType {\n    id: string;\n    name: string;\n    tag: string;\n    parent: string;\n    material: string;\n    locked: boolean;\n    materialUid: number;\n    color: string;\n    children: string[]\n}\n\ntype Map = 'color' | 'ao' | 'roughness' | 'normal' | 'alpha' | 'customTexture';\n\nexport interface SwatchData {\n    label: string;\n    swatch: string;\n}\n\nexport interface Texture {\n    uid: number;\n    tag: string;\n    label: string;\n    src: string;\n    maps: Map[];\n    normalIntensity?: number,\n    flipY?: boolean;\n    swatches: SwatchData[];\n    repeat?: number;\n    metallic?: boolean;\n}\n\nexport type MaterialReference = {uid: number, tag: string, label: string};\n\nexport interface Section {\n    tag: string;\n    label: string;\n    available_materials: MaterialReference[];\n    initial_material: MaterialReference;\n    current_material: MaterialReference;\n    active: boolean;\n    meshPart: string;\n    color: string;\n    custom_texture?: any;\n    locked: boolean;\n}\n\nexport type productActionTypes = productAction;\n\nexport type productState = {\n    [key: string]: any;\n    loadingMeshParts: boolean;\n    loadingMaterials: boolean;\n    loadingModelData: boolean;\n    meshParts: productPartType[];\n    materials: Texture[];\n    sections: Section[];\n    src: string;\n    customImage: string;\n};","import {Texture} from '../store/product/types';\n\ntype ShapeTextureFn = (data: any, isMaskedShadow?: boolean) => Texture[];\n\nconst shapeTextureData: ShapeTextureFn = (data, isMaskedShadow) => {\n\n    if (isMaskedShadow)\n        return data.map((entry: any) => {\n            return  {\n                uid: -1,\n                tag: entry.title,\n                src: '/shadow',\n                maps: ['alpha'],\n                normalIntensity: 0,\n                flipY: true,\n                swatches: [],\n                metallic: false,\n                roughness: 0\n            }\n        });\n    \n    return data.map((entry: any) => {\n        return  {\n            uid: entry.id,\n            tag: entry.slug,\n            label: entry.title.rendered,\n            src: entry.acf.texture_file ? `/${entry.acf.texture_file.title}` : null,\n            maps: entry.acf.texture_maps_included,\n            normalIntensity: +entry.acf.material_attributes.normal_intensity,\n            flipY: false,\n            swatches: entry.acf.swatches,\n            repeat: +entry.acf.material_attributes.repeat || 1,\n            metallic: entry.acf.material_attributes.metallic\n        }\n    });\n}\n\nexport default shapeTextureData;\n\n","import {Section} from '../store/product/types';\n\ntype ShapeSectionDataFn = (data: any) => Section[];\n\nconst shapeSectionData: ShapeSectionDataFn = (data: any) => {\n\n    return data.map((section: any, idx: number) => {\n\n        const initial_material = section.initial_texture.map((it: any) => {\n            return {uid: it.ID, tag: it.post_name, label: it.post_title}\n        });\n        return  {\n            tag: section.model_tag,\n            label: section.name,\n            available_materials: section.available_textures ? section.available_textures.map((at: any) => {\n                return {uid: at.ID, tag: at.post_name, label: at.post_title}\n            }) : [],\n            current_material: initial_material.length ? initial_material[0] : null,\n            active: idx === 0,\n            color: '#FFFFFF',\n        }\n    });\n}\n\nexport default shapeSectionData;\n","import { PRODUCT_ADD_MESHPARTS, PRODUCT_ADD_MATERIALS, PRODUCT_SET_ACTIVE, PRODUCT_SET_TEXTURE, PRODUCT_CLEAR_CUSTOM_IMAGE, PRODUCT_APPLY_CUSTOM_IMAGE, PRODUCT_SET_COLOR, productActionTypes, productState, PRODUCT_ADD_MODEL_DATA, PRODUCT_SET_CUSTOM_IMAGE } from './types';\nimport {shapeSectionData, shapeTextureData} from '../../utils';\nimport {productPartType} from './types';\n\nconst initialState: productState = {\n  loadingMeshParts: true,\n  loadingModelData: true,\n  loadingMaterials: true,\n  meshParts: [],\n  materials: [],\n  sections: [],\n  src: '',\n  customImage: '', // test_texture.png\n};\n\n/**\n * @param state\n * @param action\n */\nexport function productReducer(state = initialState, action: productActionTypes): productState {\n  switch (action.type) {\n    case PRODUCT_ADD_MESHPARTS:\n      \n      const newSectionsWithMeshParts = [...state.sections].map(section => {\n        const newSec = {...section};\n        const [part] = action.payload.filter((part: productPartType) => part.tag === section.tag);\n        newSec.meshPart = part.id;\n        newSec.locked = part.locked;\n        return newSec;\n      });\n\n      const meshParts = action.payload.map((part: any) => {\n        /**\n         * @TODO Need to figure out what to do here?\n         */\n        if (part.tag !== 'quarters')\n          return part;\n        part.active = true;\n        return part;\n      });\n      // Create new product logic\n      return {\n        ...state,\n        loadingMeshParts: false,\n        sections: newSectionsWithMeshParts,\n        meshParts\n        // add new state here\n      };\n      \n    case PRODUCT_SET_ACTIVE:\n    // action.payload === mesh.uuid\n\n    const [meshByIdOrParentOrChildren] = state.meshParts\n    .filter(meshPart => meshPart.id === action.payload ||\n      meshPart.parent === action.payload ||\n      meshPart.children.includes(action.payload));\n\n    const newSectionsNewActive = [...state.sections].map(section => {\n        const ns = {...section};\n        if (ns.meshPart !== meshByIdOrParentOrChildren.id) {\n          ns.active = false;\n          return ns;\n        }\n        ns.active = true;\n        return ns;\n    });\n\n      return {\n        ...state,\n        sections: newSectionsNewActive,\n      };\n\n    case PRODUCT_SET_TEXTURE:\n      // payload === material.uid\n      const [newMaterial] = state.materials.filter(material => material.uid === action.payload);\n      const newActiveSections = [...state.sections].map(section => {\n        const ns = {...section};\n        if (!ns.active)\n          return ns;\n        ns.current_material = newMaterial;\n\n        /**\n         * If the current color doesn't exist in the new material, change the color to the first in swatches of new material\n         */\n        const canKeepCurrentColor = newMaterial.swatches.filter(swatch => swatch.swatch.toLowerCase() === ns.color.toLowerCase()).length !== 0;\n        if (!canKeepCurrentColor)\n          ns.color = newMaterial.swatches[0].swatch;\n\n        return ns;\n      });\n\n      return {\n        ...state,\n        sections: newActiveSections\n      };\n    \n    case PRODUCT_SET_COLOR:\n         // payload === material.uid\n         const newColorSections = [...state.sections].map(section => {\n           const ns = {...section};\n           if (!ns.active)\n             return ns;\n           ns.color = action.payload;\n           return ns;\n         });\n   \n         return {\n           ...state,\n           sections: newColorSections\n         };\n\n    case PRODUCT_ADD_MATERIALS:\n      // Create new materials logic\n      return {\n        ...state,\n        loadingMaterials: false,\n        materials: [...state.materials, ...action.payload]\n        // add new state here\n      };\n\n    case PRODUCT_ADD_MODEL_DATA:\n      const {model_file, shadow_file, sections} = action.payload.acf;\n      const [shadow_material] = shapeTextureData([shadow_file], true);\n      shadow_material.maps = ['alpha'];\n      return {\n        ...state,\n        src: model_file,\n        loadingModelData: false,\n        materials: [shadow_material, ...state.materials],\n        sections: shapeSectionData(sections)\n      };\n\n    case PRODUCT_SET_CUSTOM_IMAGE:\n      return {\n        ...state,\n        customImage: action.payload\n      }\n\n    case PRODUCT_APPLY_CUSTOM_IMAGE:\n      // Get active section\n      const [activeSection] = state.sections.filter(section => section.active);\n      const rest = state.sections.filter(section => !section.active);\n      const newActive = {\n       ...activeSection,\n       custom_texture: action.payload\n      }\n      return {\n        ...state,\n        sections: [newActive, ...rest]\n      }\n\n    case PRODUCT_CLEAR_CUSTOM_IMAGE:\n      return {\n        ...state,\n        customImage: ''\n      }\n\n    default:\n      return state;\n  }\n}\n","export interface interfaceState {\n  pointer: {x: number; y: number};\n  modalIsOpen: {[key: string]: 'open' | 'closed'}\n};\n\n// action\n\nexport const INTERFACE_UPDATE_POINTER = 'INTERFACE_UPDATE_POINTER';\nexport const INTERFACE_TOGGLE_MODAL = 'INTERFACE_TOGGLE_MODAL';\n\ninterface interfaceAction {\n    type: typeof INTERFACE_UPDATE_POINTER\n    | typeof INTERFACE_TOGGLE_MODAL,\n    payload: any\n}\n\nexport type interfaceActionTypes = interfaceAction;\n","import _map from 'lodash/map';\n\nimport { INTERFACE_UPDATE_POINTER, INTERFACE_TOGGLE_MODAL, interfaceActionTypes, interfaceState } from './types';\n\nconst initialState: interfaceState = {\n  pointer: {x: 0, y: 0},\n  modalIsOpen: {\n    customImage: 'closed',\n    customText: 'closed',\n  }\n};\n\n/**\n * @param state\n * @param action\n */\nexport function interfaceReducer(state = initialState, action: interfaceActionTypes): interfaceState {\n  switch (action.type) {\n    case INTERFACE_UPDATE_POINTER:\n      // Create new interface logic\n      return {\n        ...state,\n        pointer: action.payload\n      };\n    case INTERFACE_TOGGLE_MODAL:\n      /**\n       * This reducer will toggle all modals closed,\n       * it will only open a single modal at a time\n       * if isOpen is true in the action payload.\n       */\n      const newModals: {[key: string]: 'open' | 'closed'} = {};\n      _map({...state.modalIsOpen}, (modal, key) => {\n       if (key !== action.payload.id)\n        newModals[key] = 'closed';\n      newModals[key] = action.payload.status;\n      });\n\n    return {\n      ...state,\n      modalIsOpen: newModals\n    }\n    default:\n      return state;\n  }\n}\n","import { combineReducers } from \"@reduxjs/toolkit\";\nimport { Action, ThunkAction, configureStore } from '@reduxjs/toolkit';\nimport {productReducer} from './product/reducers';\nimport {interfaceReducer} from './interface/reducers';\nimport { ThunkDispatch } from 'redux-thunk';\n\nconst rootReducer = combineReducers({\n    product: productReducer,\n    interface: interfaceReducer\n});\n\nexport const store = configureStore({\n    reducer: rootReducer\n});\n\nexport type State = ReturnType<typeof rootReducer>;\n\nexport type RootState = ReturnType<typeof store.getState>;\nexport type AppDispatch = ThunkDispatch<RootState, void, Action>;\nexport type AppThunk<ReturnType = void> = ThunkAction<ReturnType, RootState, unknown, Action<string>>;\nexport type GetState = typeof store.getState;","type Point = [x: number, y: number, z: number];\ninterface Light {\n    id: string;\n    color: string;\n    position: [x: number, y: number, z: number];\n    mapSize: number,\n    intensity: number,\n    shadows: boolean\n}\n\ninterface WorldConfig {\n    effects: boolean;\n    worldOffset: Point;\n    lighting: Light[];\n}\n\nconst spotlightIntensity = 0.5; // 10;\nconst spotlightDistance = 10; // 10;\nconst spotlightHeightReduction = 3; // 3;\nconst spotlightHeight = spotlightDistance - spotlightHeightReduction;\n\n\nconst worldConfig: WorldConfig = {\n    effects: false,\n    worldOffset: [0, -0.2, 0],\n    lighting:  [\n        /**\n         * Top spotlight\n         */\n        {\n          id: 'spot',\n          color: '#FFFFFF',\n          position: [0, spotlightDistance + spotlightHeightReduction, 0],\n          intensity: spotlightIntensity - spotlightIntensity / 2,\n          mapSize: 1024,\n          shadows: false,\n        },\n        /**\n         * Inner spotlight\n         */\n        {\n          id: 'spot',\n          color: '#FFFFFF',\n          position: [spotlightDistance, spotlightHeight, 0],\n          intensity: spotlightIntensity,\n          mapSize: 1024,\n          shadows: false,\n        },\n        /**\n         * Outer spotlight\n         */\n        {\n          id: 'spot',\n          color: '#FFFFFF',\n          position: [spotlightDistance * -1, spotlightHeight, 0 ],\n          intensity: spotlightIntensity,\n          mapSize: 1024,\n          shadows: false,\n        },\n        /**\n         * Front spotlight\n         */\n        {\n          id: 'spot',\n          color: '#FFFFFF',\n          position: [0, spotlightHeight, spotlightDistance],\n          intensity: spotlightIntensity,\n          mapSize: 1024,\n          shadows: false,\n        },\n        /**\n         * Rear spotlight\n         */\n        {\n          id: 'spot',\n          color: '#FFFFFF',\n          position: [0, spotlightHeight, spotlightDistance * -1],\n          intensity: spotlightIntensity,\n          mapSize: 1024,\n          shadows: false,\n        },\n      ],\n}\n\nexport default worldConfig;","interface CameraConfig {\n    fov: number,\n    near: number,\n    far: number,\n    position: [x: number, y: number, z: number]\n}\n\nconst cameraConfig: CameraConfig = {\n    fov: 30,\n    near: 1,\n    far: 300,\n    position: [0, 0, 5],\n  };\n\n  export default cameraConfig;","import styled from 'styled-components';\n\nexport const WorldDiv = styled.div`\n    height: 100%;\n    width: 100%;\n`","import { RootState } from '../index';\n\nexport const getIsLoading = (state: RootState) => state.product.loadingMeshParts && state.product.loadingMaterials && state.product.loadingModelData;\n\nexport const getAllProductMeshParts = (state: RootState) => state.product.meshParts;\n\nexport const getActiveProductPart = (state: RootState) => {\n    const active = state.product.sections.filter(section => section.active)[0];\n    return active;\n}\n\nexport const getAllMaterials = (state: RootState) => state.product.materials;\nexport const getAllSections = (state: RootState) => state.product.sections;\nexport const getActiveSection = (state: RootState) => state.product.sections.filter(section => section.active);\nexport const getProductModelPath = (state: RootState) => state.product.src;\nexport const getMaterialByUid = (uid: number | null) => (state: RootState) => state.product.materials.filter(material => material.uid === uid)[0];\nexport const getMaterialByTag = (tag: string | null) => (state: RootState) => state.product.materials.filter(material => material.tag === tag)[0];\nexport const getProductDataByType = (type: string) => (state: RootState) => state.product[type];\nexport const getProductCustomImage = (state: RootState) => state.product.customImage;","import React, {useState, useEffect} from 'react';\nimport {useCubeTexture} from 'drei';\nimport { CustomMaterialProps } from './types';\nimport {useTexture} from 'drei';\nimport {fabric} from 'fabric';\nimport { Vector2, RepeatWrapping, Texture } from 'three';\nimport _map from 'lodash/map';\nimport { useSelector } from 'react-redux';\nimport { getMaterialByUid } from '../../store/product/selectors';\n\nconst multiplyMaterialsTogether = (customBlob: string, baseTexture: string) => {\n    const dimensions = 1024;\n    const proxy = document.createElement('canvas');\n    proxy.id = 'proxyCanvas';\n    proxy.width = dimensions;\n    proxy.height = dimensions;\n\n    return new Promise<string>((res, rej) => {\n        const canvas = new fabric.Canvas('proxyCanvas');\n        canvas.setDimensions({width:dimensions, height:dimensions});\n    \n        fabric.Image.fromURL(baseTexture, (filt) => {\n\n            filt.scaleToWidth(dimensions);\n\n            const filter = new fabric.Image.filters.BlendImage({\n              image: filt,\n              mode: \"multiply\",\n              alpha: 0.5,\n            });\n\n            fabric.Image.fromURL(customBlob, image => {\n                image.scaleToWidth(dimensions);\n                const customImage = image.set({left: 0, top: 0});\n                if (filter) {\n                    (customImage as any).filters.push(filter);\n                    (customImage as any).applyFilters();\n                }\n                canvas.add(customImage);\n                const comped = canvas.toDataURL();\n\n                fetch(comped)\n                .then(u => u.blob())\n                .then(window.URL.createObjectURL)\n                .then(res);\n            })\n        });\n    });\n}\n\n/**\n * \n * @param uid  the material uid\n */\n\nconst CustomMaterial: React.FC<CustomMaterialProps> = ({uid, color, customTexture}) => {\n\n    const material = useSelector(getMaterialByUid(uid));\n    const [compedCustomTexture, setCompedCustomTexture] = useState<string | null>(null);\n    const envMap = useCubeTexture(['px.png', 'nx.png', 'py.png', 'ny.png', 'pz.png', 'nz.png'], { path: '/cubemap/medium-studio/' });\n    const maps = material && [...material.maps, 'custom'];\n\n    useEffect(() => {\n        if (customTexture) {\n            if (material.maps.includes('color'))\n            {\n                multiplyMaterialsTogether(customTexture, `${material.src}/color.jpg`)\n                .then(res => setCompedCustomTexture(res));\n            } else {\n            setCompedCustomTexture(customTexture);\n            }\n        } else {\n            setCompedCustomTexture(null);\n        }\n    }, [customTexture, material]);\n\n\n    // Convert to texture image paths\n        const paths = maps.map(texture => {\n            if (texture === 'custom')\n                return compedCustomTexture ? compedCustomTexture : '';\n             return `${material.src}/${texture}.jpg`\n        }).filter(Boolean);\n\n    // Load all the textures (useTexture returns an array)\n    let texture: Texture[] | null = useTexture(paths);\n\n    // Convert texture array to an object where the key === the index position of the map array\n    let textureObj = Object.assign({}, texture);\n\n    // Flip the textures if needed \n    // if (material.flipY)\n      _map(textureObj, txt => {txt.flipY = false});\n        \n    \n    // Set more texture values\n    _map(textureObj, txt => {\n        material.repeat && txt.repeat.set(material.repeat, material.repeat);\n        txt.wrapS = RepeatWrapping;\n        txt.wrapT = RepeatWrapping;\n        return txt;\n    });\n\n    const _handleMapVsCustom = () => {\n        switch(true) {\n            case !!compedCustomTexture: \n                return textureObj[maps.indexOf('custom')];\n            case maps.includes('color'):\n                return textureObj[maps.indexOf('color')];\n            default:\n                return null;\n        }\n\n    }\n\n    const _getTexture = () => (\n        <meshStandardMaterial\n            attach=\"material\"\n            color={color}\n            map={_handleMapVsCustom()}\n            aoMap={maps.includes('ao') ? textureObj[maps.indexOf('ao')] : null}\n            roughnessMap={maps.includes('roughness') ? textureObj[maps.indexOf('roughness')] : null}\n            alphaMap={maps.includes('alpha') ? textureObj[maps.indexOf('alpha')] : null}\n            normalMap={maps.includes('normal') ? textureObj[maps.indexOf('normal')] : null}\n            normalScale={new Vector2(material.normalIntensity, material.normalIntensity)}\n            transparent={true}\n            onUpdate={(self) => (self.needsUpdate = true)}\n        />);\n\n    /**\n     * @TODO Ground shadow\n     */\n    const _getGroundShadow = () => (\n        <meshPhongMaterial\n            attach=\"material\"\n            color={color}\n            map={(maps.includes('color') ? textureObj[maps.indexOf('color')] : null)}\n            aoMap={maps.includes('ao') ? textureObj[maps.indexOf('ao')] : null}\n            alphaMap={maps.includes('alpha') ? textureObj[maps.indexOf('alpha')] : null}\n            normalMap={maps.includes('normal') ? textureObj[maps.indexOf('normal')] : null}\n            normalScale={new Vector2(material.normalIntensity, material.normalIntensity)}\n            transparent={true}\n            shininess={0}\n            onUpdate={(self) => (self.needsUpdate = true)}\n        />\n    );\n\n    const _getNonTexturedMaterial = () => (\n        <meshPhysicalMaterial\n            attach=\"material\"\n            color={color}\n            metalness={material.metallic ? 1 : 0}\n            roughness={0}\n            envMap={envMap}\n        />\n    );\n\n    switch(true) {\n        case(maps.includes('alpha')) :\n            return _getGroundShadow();\n        case(maps.length === 0) :\n            return _getNonTexturedMaterial();\n        default :\n            return _getTexture();\n    }\n\n};\n\nexport default CustomMaterial;","const brandConfig = {\n    hoverColor: '#1c894a'\n}\n\nexport default brandConfig;","import { Mesh } from 'three';\nimport _map from 'lodash/map';\nimport { PRODUCT_ADD_MESHPARTS, PRODUCT_SET_ACTIVE, PRODUCT_DESTROY_ACTIVE_CUSTOM_IMAGE, PRODUCT_SET_CUSTOM_IMAGE, PRODUCT_CLEAR_CUSTOM_IMAGE, PRODUCT_APPLY_CUSTOM_IMAGE, PRODUCT_SET_TEXTURE, PRODUCT_SET_COLOR, productActionTypes, productPartType, PRODUCT_ADD_MATERIALS, PRODUCT_ADD_MODEL_DATA } from './types';\n\n/**\n * \n * Helpers\n */\nconst parseName = (name: string) => {\n    const label = name.split('|')[0];\n    const readable = label.split('_');\n    return readable.join(' ');\n}\n\nconst parseTag = (name: string) => {\n    return name.split('|')[0];\n}\n\n/**\n * \n * MeshParts\n */\n\nexport function productAddMeshParts(data: any): productActionTypes {\n\n    const { sceneId } = data; \n\n    const meshParts: productPartType[] = _map(data.meshParts, (part: Mesh) => {\n        return {\n            id: part.uuid,\n            tag: parseTag(part.name),\n            name: parseName(part.name),\n            parent: part.parent && part.parent.uuid !== sceneId ? part.parent.uuid : null,\n            children: part.children.map(child => child.uuid),\n            locked: part.name.includes('|disable'),\n        } as productPartType\n    })\n\n    return {\n        type: PRODUCT_ADD_MESHPARTS,\n        payload: meshParts\n    }\n}\n\nexport function productSetActivePart(id: string) {\n    return {\n        type: PRODUCT_SET_ACTIVE,\n        payload: id\n    }\n}\n\nexport function productSetTextureToActive(uid: string | number) {\n    return {\n        type: PRODUCT_SET_TEXTURE,\n        payload: uid\n    }\n}\n\nexport function productSetColorToActive(hex: string) {\n    return {\n        type: PRODUCT_SET_COLOR,\n        payload: hex\n    }\n}\n\nexport function productAddMaterials(data: any): productActionTypes {\n    return {\n        type: PRODUCT_ADD_MATERIALS,\n        payload: data\n    }\n}\n\nexport function productAddModelData(data: any): productActionTypes {\n    return {\n        type: PRODUCT_ADD_MODEL_DATA,\n        payload: data\n    }\n}\n\nexport function productSetCustomImage(data: any): productActionTypes {\n    return {\n        type: PRODUCT_SET_CUSTOM_IMAGE,\n        payload: data\n    }\n}\n\nexport function productClearCustomImage(): any {\n    return {\n        type: PRODUCT_CLEAR_CUSTOM_IMAGE\n    }\n}\n\nexport function productApplyCustomImage(data: string): productActionTypes {\n    return {\n        type: PRODUCT_APPLY_CUSTOM_IMAGE,\n        payload: data\n    }\n}\n\nexport function destroyCustomTextureFromActive(): any {\n    return {\n        type: PRODUCT_APPLY_CUSTOM_IMAGE,\n        payload: null\n    }\n}\n","import { INTERFACE_UPDATE_POINTER, INTERFACE_TOGGLE_MODAL, interfaceActionTypes } from './types';\n\nexport function interfaceUpdatePointer(data: any): interfaceActionTypes {\n    return {\n        type: INTERFACE_UPDATE_POINTER,\n        payload: data\n    }\n}\n\nexport function interfaceToggleModal(data: {id: string; status: 'open' | 'closed'}): interfaceActionTypes {\n    return {\n        type: INTERFACE_TOGGLE_MODAL,\n        payload: data\n    }\n}","import { RootState } from '../index';\n\nexport const getAllInterfaceData = (state: RootState) => state.interface;\nexport const interfaceGetPointerPosition = (state: RootState) => state.interface.pointer;\nexport const interfaceGetModalState = (id: string) => (state: RootState) => state.interface.modalIsOpen[id];","import React, {Suspense, useState} from 'react';\nimport {useDispatch, useSelector} from 'react-redux';\nimport { PartProps } from './types';\nimport CustomMaterial from '../CustomMaterial';\nimport config from '../../config/brandConfig';\nimport { productSetActivePart, productSetColorToActive } from '../../store/product/actions';\nimport {interfaceUpdatePointer} from '../../store/interface/actions';\nimport {interfaceGetPointerPosition} from '../../store/interface/selectors';\n\nconst Part: React.FC<PartProps> = ({materialUid, color, mesh, locked, id, customTexture}) => {\n\n    const dispatch = useDispatch();\n    // Disable stops the user from clicking on the item until the color has returned to default\n    // This stops the user being able to lock in the hoverColor\n    const [disabled, setDisabled] = useState(false);\n    const {x: downX, y: downY} = useSelector(interfaceGetPointerPosition);\n\n    const _handleSetActive = () => {\n        setDisabled(true);\n        dispatch(productSetActivePart(id));\n        dispatch(productSetColorToActive(config.hoverColor));\n        setTimeout(() => {\n            dispatch(productSetColorToActive(color));\n            setDisabled(false);\n        }, 200);\n    }\n    const _handlePointerDown = (e: React.PointerEvent<Element>) => {\n        const {clientX: x, clientY: y} = e;\n        dispatch(interfaceUpdatePointer({x: Math.floor(x), y: Math.floor(y)}));\n    }\n\n    const _handlePointerUp = (e: React.PointerEvent<Element>) => {\n        // This determines whether the user dragged or intended to click\n        const {clientX: x, clientY: y} = e;\n        if (Math.floor(x) === downX && Math.floor(y) === downY)\n            _handleSetActive();\n    }\n\n    return (\n        <Suspense fallback={\n            (\n            <mesh\n            geometry={mesh.geometry}\n            >\n                <meshStandardMaterial color={'#ebebeb'} wireframe/>\n            </mesh>\n            )\n        }>\n            <mesh\n                onPointerDown={(e) => !locked && !disabled && _handlePointerDown(e)}\n                onPointerUp={(e) => !locked && !disabled && _handlePointerUp(e)}\n                key={id} geometry={mesh.geometry} castShadow={false} receiveShadow={false}>\n                    { materialUid && (\n                        <CustomMaterial customTexture={customTexture} color={ color } uid={materialUid} />\n                    ) }\n            </mesh>\n        </Suspense>\n    );\n};\n\nexport default Part;","import React from 'react';\nimport _map from 'lodash/map';\nimport _filter from 'lodash/filter';\nimport { useSelector} from 'react-redux';\nimport worldConfig from '../../config/worldConfig';\nimport { ProductProps } from './types';\nimport { getAllProductMeshParts, getAllSections, getMaterialByTag } from '../../store/product/selectors';\nimport Part from '../Part';\n\nconst Product: React.FC<ProductProps> = ({file, rotation = [0, 0, 0]}) => {\n\n    const meshParts = useSelector(getAllProductMeshParts);\n    const sections = useSelector(getAllSections);\n    const shadowMaterial = useSelector(getMaterialByTag('shadow'));\n\n    return (        \n            <group position={worldConfig.worldOffset} rotation={rotation}>\n                {\n                    /**\n                     * Add top level mesh parts\n                     */\n                    _map(file, (mesh: any) => {\n                        const [part] = meshParts.filter(meshPart => meshPart.id === mesh.uuid);\n                        const [section] = sections.filter(s => s.meshPart === mesh.uuid);\n                        if (!part || !section) return null;\n                        const {locked, id} = part;\n                        const {current_material, custom_texture, color} = section;\n                        return <Part key={id} id={id} customTexture={custom_texture} locked={locked} mesh={mesh} materialUid={current_material.uid} color={color} />;\n                    })\n                }\n                {\n                    /**\n                     * Add children of top level mesh parts\n                     */\n                    _map(file, (mesh: any) => {\n                       return mesh.children.map((child: any) => {\n                            const [part] = meshParts.filter(meshPart => meshPart.id === child.parent.uuid);\n                            const [section] = sections.filter(s => s.meshPart === child.parent.uuid);\n                            if (!part || !section) return null;\n                            const {locked, id} = part;\n                            const {current_material, custom_texture, color} = section;\n                            return <Part key={id} id={id} customTexture={custom_texture} locked={locked} mesh={child} materialUid={current_material.uid} color={color} />;\n                        });\n                    })\n                }\n                {\n                    /**\n                     * Add the ground shadow\n                     */\n                    _map(meshParts, (part: any) => {\n                        const {locked, id} = part;\n                        const [shadowMesh] = _filter(file, (mesh: any) => mesh.name === 'shadow|disable');\n                        if (part.tag !== 'shadow')\n                            return null;\n                        return <Part key={id} id={id} locked={locked} mesh={shadowMesh} materialUid={shadowMaterial.uid} color={'#000000'} />;\n                    })\n                }\n            </group>\n    );\n};\n\nexport default Product;","const cameraControlsConfig = {\n    enableDampening: true,\n    dampeningFactor: 0.1,\n    enableZoom: true,\n    maxPolarAngle: 85,\n    minPolarAngle: 0,\n    enablePan: false,\n}\n\nexport default cameraControlsConfig;","import React, {useRef} from 'react';\nimport {MathUtils} from 'three';\nimport { CameraControlsProps } from './types';\nimport {OrbitControls} from 'three/examples/jsm/controls/OrbitControls';\nimport {extend, useFrame, ReactThreeFiber, useThree} from 'react-three-fiber';\nimport config from '../../config/cameraControlsConfig';\n\nextend({ OrbitControls });\n\ndeclare global {\n    namespace JSX {\n      interface IntrinsicElements {\n        'orbitControls': ReactThreeFiber.Object3DNode<OrbitControls, typeof OrbitControls>;\n      }\n    }\n  }\n\nconst CameraControls: React.FC<CameraControlsProps> = () => {\n\n      const {enableDampening, enablePan, dampeningFactor, enableZoom, maxPolarAngle, minPolarAngle} = config;\n\n      const {\n        camera,\n        gl: { domElement }\n    } = useThree();\n\n\n    // Ref to the controls, so that we can update them on every frame using useFrame\n    const controls = useRef<OrbitControls | null>();\n    useFrame(state => controls.current && controls.current.update());\n\n    return (\n        <orbitControls\n        ref={controls}\n        args={[camera, domElement]}\n        enableZoom={enableZoom}\n        enableDamping={enableDampening}\n        dampingFactor={dampeningFactor}\n        enablePan={enablePan}\n        maxPolarAngle={MathUtils.degToRad(maxPolarAngle)}\n        minPolarAngle={MathUtils.degToRad(minPolarAngle)}\n        />\n    );\n};\n\nexport default CameraControls;","import React, {Suspense, useEffect} from 'react';\nimport {Canvas, useResource} from 'react-three-fiber';\nimport {useDispatch, Provider } from 'react-redux';\nimport { EffectComposer, SSAO, SMAA } from 'react-postprocessing';\nimport _filter from 'lodash/filter';\nimport { useGLTF } from 'drei';\nimport {LinearToneMapping} from 'three';\nimport worldConfig from '../../config/worldConfig';\nimport cameraConfig from '../../config/cameraConfig';\nimport {WorldDiv} from './styles/WorldStyles';\nimport { WorldProps } from './types';\nimport Product from '../Product';\nimport CameraControls from '../CameraControls';\nimport { productAddMeshParts } from '../../store/product/actions';\nimport {store} from '../../store';\n\nconst World: React.FC<WorldProps> = ({model}) => {\n    const dispatch = useDispatch();\n    \n    /**\n     * Data\n     */\n    const { effects, lighting } = worldConfig;\n    const { nodes } = useGLTF(model);\n    // const ref = useResource();\n    \n    /**\n     * State\n     */\n\n    useEffect(() => {\n        const meshParts = _filter(nodes, part => part.name !== 'Scene' );\n        const sceneId = _filter(nodes, part => part.name === 'Scene')[0].uuid;\n        dispatch(productAddMeshParts({meshParts, sceneId}));\n    }, [dispatch, nodes]);\n    \n\n    /**\n     * Methods\n     * @private\n     */\n\n    const _intersectionsFilter = (intersections: any) => {\n        return intersections?.length ? [intersections[0]] : intersections;\n    }\n\n    const _renderEffectComposer = () => (\n        <EffectComposer multisampling={2}>\n            <SSAO\n            intensity={20}\n            luminanceInfluence={0.2}\n            radius={8}\n            scale={0.5}\n            bias={0.5}\n            distanceThreshold={0.5}\n            distanceFalloff={0.03}\n            rangeFalloff={0.001}\n            />\n            <SMAA />\n        </EffectComposer>\n    );\n    \n\n    if (!nodes)\n        return null;\n\n    return (    \n        <WorldDiv>\n            <Canvas\n                gl={{\n                    antialias: true,\n                    preserveDrawingBuffer: true\n                }}\n                pixelRatio={window.devicePixelRatio > 2 ? 2 : window.devicePixelRatio}\n                concurrent={true}\n                raycaster={{ filter: _intersectionsFilter }}\n                camera={{ fov: cameraConfig.fov, position: cameraConfig.position }}\n            >\n                {/** Scene */}\n                <CameraControls />\n                {/* <hemisphereLight intensity={0.6} position={[0, 50, 0]} /> */}\n                {lighting.map((light, idx) => (\n                    <spotLight\n                        key={idx}\n                        color={light.color}\n                        position={light.position}\n                        intensity={light.intensity}\n                        castShadow={false}\n                    />\n                ))}\n                \n                {/** Model */}\n                <Provider store={store}>\n                    <Suspense fallback={<p>Creating something awesome...</p>}>\n                        <Product file={nodes} rotation={[0, 0, 0]} />\n                    </Suspense>\n                </Provider>\n                {/** Effects */}\n                {effects && _renderEffectComposer()}\n                \n            </Canvas>\n        </WorldDiv>\n    );\n};\n\nexport default World;","import { ThunkAction } from \"@reduxjs/toolkit\";\nimport {Action, Dispatch} from 'redux';\nimport {GetState, RootState} from '../../store';\nimport {productAddMaterials, productAddModelData} from './actions';\nimport {shapeTextureData} from '../../utils';\nconst mockProductData = require('../../mock/product.json');\nconst mockTextureData = require('../../mock/texture.json');\n\nexport const thunkProductLoadMaterials = (): ThunkAction<void, RootState, unknown, Action<string>> => async(dispatch: Dispatch, getState: GetState) => {\n    // fetch('http://192.168.1.2/wp-json/wp/v2/texture')\n    fetch('https://jsonplaceholder.typicode.com/todos/100')\n    .then(res => res.json())\n    .then(data => shapeTextureData(mockTextureData))\n    .then(textures => dispatch(productAddMaterials(textures)))\n    .catch(error => console.error('thunkProductLoadMaterials was not successful', error));\n}\n\nexport const thunkProductLoadModel = (): ThunkAction<void, RootState, unknown, Action<string>> => async(dispatch: Dispatch, getState: GetState) => {\n    // fetch('http://192.168.1.2/wp-json/wp/v2/custom/51')\n    fetch('https://jsonplaceholder.typicode.com/todos/100')\n    .then(res => res.json())\n    .then(data => dispatch(productAddModelData(mockProductData)))\n    .catch(error => console.error('thunkProductLoadModel was not successful', error));\n}","import styled from 'styled-components';\nimport { SwatchTrayProps } from '../types';\n\nexport const SwatchTrayDiv = styled.div<SwatchTrayProps>`\n    display: flex;\n`","import styled from 'styled-components';\nimport { SwatchProps } from '../types';\n\nexport const SwatchDiv = styled.div<SwatchProps>`\n    height: 78px;\n    width: 78px;\n    background-color: ${props => props.color};\n    cursor: pointer;\n    &:hover {\n        transition: transform 0.1s ease-out;\n        transform: scale(1.1);\n        z-index: 15;\n    }\n`","import React from 'react';\nimport { useDispatch } from 'react-redux';\nimport { productSetColorToActive } from '../../store/product/actions';\nimport {SwatchDiv} from './styles/SwatchStyles';\nimport { SwatchProps } from './types';\n\nconst Swatch: React.FC<SwatchProps> = ({color, label}) => {\n\n    const dispatch = useDispatch();\n    return (\n        <SwatchDiv onClick={() => dispatch(productSetColorToActive(color))} color={color} />\n    );\n};\n\nexport default Swatch;","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport { getActiveProductPart, getMaterialByUid } from '../../store/product/selectors';\nimport {SwatchData} from '../../store/product/types';\nimport {SwatchTrayDiv} from './styles/SwatchTrayStyles';\nimport { SwatchTrayProps } from './types';\nimport Swatch from '../Swatch';\n\nconst SwatchTray: React.FC<SwatchTrayProps> = () => {\n    const ACTIVE_PRODUCT = useSelector(getActiveProductPart);\n    const ACTIVE_MATERIALS = useSelector(getMaterialByUid(ACTIVE_PRODUCT ? ACTIVE_PRODUCT.current_material.uid : null));\n    const SWATCHES = ACTIVE_MATERIALS && ACTIVE_MATERIALS.swatches;\n  \n  if (!ACTIVE_PRODUCT)\n      return null;\n\n    return (\n        <SwatchTrayDiv>\n            {SWATCHES && SWATCHES.map((swatch: SwatchData) => <Swatch key={swatch.label} label={swatch.label} color={swatch.swatch} />)}\n        </SwatchTrayDiv>\n    );\n};\n\nexport default SwatchTray;","import { createGlobalStyle } from 'styled-components';\n\n/**\n * This is base reset created by Tailwind called Preflight.\n * https://tailwindcss.com/docs/preflight\n*/\n\nconst Preflight = createGlobalStyle`\n/*! modern-normalize v1.0.0 | MIT License | https://github.com/sindresorhus/modern-normalize */\n\n/*\nDocument\n========\n*/\n\n/**\nUse a better box model (opinionated).\n*/\n\n*,\n*::before,\n*::after {\n  box-sizing: border-box;\n}\n\n/**\nUse a more readable tab size (opinionated).\n*/\n\n:root {\n  -moz-tab-size: 4;\n  tab-size: 4;\n}\n\n/**\n1. Correct the line height in all browsers.\n2. Prevent adjustments of font size after orientation changes in iOS.\n*/\n\nhtml {\n  line-height: 1.15; /* 1 */\n  -webkit-text-size-adjust: 100%; /* 2 */\n}\n\n/*\nSections\n========\n*/\n\n/**\nRemove the margin in all browsers.\n*/\n\nhtml, body, #root {\n  height: 100%;\n}\n\nbody {\n  margin: 0;\n}\n\n/**\nImprove consistency of default fonts in all browsers. (https://github.com/sindresorhus/modern-normalize/issues/3)\n*/\n\nbody {\n  font-family:\n\t\tsystem-ui,\n\t\t-apple-system, /* Firefox supports this but not yet 'system-ui' */\n\t\t'Segoe UI',\n\t\tRoboto,\n\t\tHelvetica,\n\t\tArial,\n\t\tsans-serif,\n\t\t'Apple Color Emoji',\n\t\t'Segoe UI Emoji';\n}\n\n/*\nGrouping content\n================\n*/\n\n/**\n1. Add the correct height in Firefox.\n2. Correct the inheritance of border color in Firefox. (https://bugzilla.mozilla.org/show_bug.cgi?id=190655)\n*/\n\nhr {\n  height: 0; /* 1 */\n  color: inherit; /* 2 */\n}\n\n/*\nText-level semantics\n====================\n*/\n\n/**\nAdd the correct text decoration in Chrome, Edge, and Safari.\n*/\n\nabbr[title] {\n  -webkit-text-decoration: underline dotted;\n          text-decoration: underline dotted;\n}\n\n/**\nAdd the correct font weight in Edge and Safari.\n*/\n\nb,\nstrong {\n  font-weight: bolder;\n}\n\n/**\n1. Improve consistency of default fonts in all browsers. (https://github.com/sindresorhus/modern-normalize/issues/3)\n2. Correct the odd 'em' font sizing in all browsers.\n*/\n\ncode,\nkbd,\nsamp,\npre {\n  font-family:\n\t\tui-monospace,\n\t\tSFMono-Regular,\n\t\tConsolas,\n\t\t'Liberation Mono',\n\t\tMenlo,\n\t\tmonospace; /* 1 */\n  font-size: 1em; /* 2 */\n}\n\n/**\nAdd the correct font size in all browsers.\n*/\n\nsmall {\n  font-size: 80%;\n}\n\n/**\nPrevent 'sub' and 'sup' elements from affecting the line height in all browsers.\n*/\n\nsub,\nsup {\n  font-size: 75%;\n  line-height: 0;\n  position: relative;\n  vertical-align: baseline;\n}\n\nsub {\n  bottom: -0.25em;\n}\n\nsup {\n  top: -0.5em;\n}\n\n/*\nTabular data\n============\n*/\n\n/**\n1. Remove text indentation from table contents in Chrome and Safari. (https://bugs.chromium.org/p/chromium/issues/detail?id=999088, https://bugs.webkit.org/show_bug.cgi?id=201297)\n2. Correct table border color inheritance in all Chrome and Safari. (https://bugs.chromium.org/p/chromium/issues/detail?id=935729, https://bugs.webkit.org/show_bug.cgi?id=195016)\n*/\n\ntable {\n  text-indent: 0; /* 1 */\n  border-color: inherit; /* 2 */\n}\n\n/*\nForms\n=====\n*/\n\n/**\n1. Change the font styles in all browsers.\n2. Remove the margin in Firefox and Safari.\n*/\n\nbutton,\ninput,\noptgroup,\nselect,\ntextarea {\n  font-family: inherit; /* 1 */\n  font-size: 100%; /* 1 */\n  line-height: 1.15; /* 1 */\n  margin: 0; /* 2 */\n}\n\n/**\nRemove the inheritance of text transform in Edge and Firefox.\n1. Remove the inheritance of text transform in Firefox.\n*/\n\nbutton,\nselect { /* 1 */\n  text-transform: none;\n}\n\n/**\nCorrect the inability to style clickable types in iOS and Safari.\n*/\n\nbutton,\n[type='button'],\n[type='reset'],\n[type='submit'] {\n  -webkit-appearance: button;\n}\n\n/**\nRemove the inner border and padding in Firefox.\n*/\n\n::-moz-focus-inner {\n  border-style: none;\n  padding: 0;\n}\n\n/**\nRestore the focus styles unset by the previous rule.\n*/\n\n:-moz-focusring {\n  outline: 1px dotted ButtonText;\n}\n\n/**\nRemove the additional ':invalid' styles in Firefox.\nSee: https://github.com/mozilla/gecko-dev/blob/2f9eacd9d3d995c937b4251a5557d95d494c9be1/layout/style/res/forms.css#L728-L737\n*/\n\n:-moz-ui-invalid {\n  box-shadow: none;\n}\n\n/**\nRemove the padding so developers are not caught out when they zero out 'fieldset' elements in all browsers.\n*/\n\nlegend {\n  padding: 0;\n}\n\n/**\nAdd the correct vertical alignment in Chrome and Firefox.\n*/\n\nprogress {\n  vertical-align: baseline;\n}\n\n/**\nCorrect the cursor style of increment and decrement buttons in Safari.\n*/\n\n::-webkit-inner-spin-button,\n::-webkit-outer-spin-button {\n  height: auto;\n}\n\n/**\n1. Correct the odd appearance in Chrome and Safari.\n2. Correct the outline style in Safari.\n*/\n\n[type='search'] {\n  -webkit-appearance: textfield; /* 1 */\n  outline-offset: -2px; /* 2 */\n}\n\n/**\nRemove the inner padding in Chrome and Safari on macOS.\n*/\n\n::-webkit-search-decoration {\n  -webkit-appearance: none;\n}\n\n/**\n1. Correct the inability to style clickable types in iOS and Safari.\n2. Change font properties to 'inherit' in Safari.\n*/\n\n::-webkit-file-upload-button {\n  -webkit-appearance: button; /* 1 */\n  font: inherit; /* 2 */\n}\n\n/*\nInteractive\n===========\n*/\n\n/*\nAdd the correct display in Chrome and Safari.\n*/\n\nsummary {\n  display: list-item;\n}\n\n/**\n * Manually forked from SUIT CSS Base: https://github.com/suitcss/base\n * A thin layer on top of normalize.css that provides a starting point more\n * suitable for web applications.\n */\n\n/**\n * Removes the default spacing and border for appropriate elements.\n */\n\nblockquote,\ndl,\ndd,\nh1,\nh2,\nh3,\nh4,\nh5,\nh6,\nhr,\nfigure,\np,\npre {\n  margin: 0;\n}\n\nbutton {\n  background-color: transparent;\n  background-image: none;\n}\n\n/**\n * Work around a Firefox/IE bug where the transparent 'button' background\n * results in a loss of the default 'button' focus styles.\n */\n\nbutton:focus {\n  outline: 1px dotted;\n  outline: 5px auto -webkit-focus-ring-color;\n}\n\nfieldset {\n  margin: 0;\n  padding: 0;\n}\n\nol,\nul {\n  list-style: none;\n  margin: 0;\n  padding: 0;\n}\n\n/**\n * Tailwind custom reset styles\n */\n\n/**\n * 1. Use the user's configured 'sans' font-family (with Tailwind's default\n *    sans-serif font stack as a fallback) as a sane default.\n * 2. Use Tailwind's default \"normal\" line-height so the user isn't forced\n *    to override it to ensure consistency even when using the default theme.\n */\n\nhtml {\n  font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, \"Noto Sans\", sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\", \"Noto Color Emoji\"; /* 1 */\n  line-height: 1.5; /* 2 */\n}\n\n/**\n * Inherit font-family and line-height from 'html' so users can set them as\n * a class directly on the 'html' element.\n */\n\nbody {\n  font-family: inherit;\n  line-height: inherit;\n}\n\n/**\n * 1. Prevent padding and border from affecting element width.\n *\n *    We used to set this in the html element and inherit from\n *    the parent element for everything else. This caused issues\n *    in shadow-dom-enhanced elements like <details> where the content\n *    is wrapped by a div with box-sizing set to 'content-box'.\n *\n *    https://github.com/mozdevs/cssremedy/issues/4\n *\n *\n * 2. Allow adding a border to an element by just adding a border-width.\n *\n *    By default, the way the browser specifies that an element should have no\n *    border is by setting it's border-style to 'none' in the user-agent\n *    stylesheet.\n *\n *    In order to easily add borders to elements by just setting the 'border-width'\n *    property, we change the default border-style for all elements to 'solid', and\n *    use border-width to hide them instead. This way our 'border' utilities only\n *    need to set the 'border-width' property instead of the entire 'border'\n *    shorthand, making our border utilities much more straightforward to compose.\n *\n *    https://github.com/tailwindcss/tailwindcss/pull/116\n */\n\n*,\n::before,\n::after {\n  box-sizing: border-box; /* 1 */\n  border-width: 0; /* 2 */\n  border-style: solid; /* 2 */\n  border-color: #e5e7eb; /* 2 */\n}\n\n/*\n * Ensure horizontal rules are visible by default\n */\n\nhr {\n  border-top-width: 1px;\n}\n\n/**\n * Undo the 'border-style: none' reset that Normalize applies to images so that\n * our 'border-{width}' utilities have the expected effect.\n *\n * The Normalize reset is unnecessary for us since we default the border-width\n * to 0 on all elements.\n *\n * https://github.com/tailwindcss/tailwindcss/issues/362\n */\n\nimg {\n  border-style: solid;\n}\n\ntextarea {\n  resize: vertical;\n}\n\ninput::placeholder,\ntextarea::placeholder {\n  color: #9ca3af;\n}\n\nbutton,\n[role=\"button\"] {\n  cursor: pointer;\n}\n\ntable {\n  border-collapse: collapse;\n}\n\nh1,\nh2,\nh3,\nh4,\nh5,\nh6 {\n  font-size: inherit;\n  font-weight: inherit;\n}\n\n/**\n * Reset links to optimize for opt-in styling instead of\n * opt-out.\n */\n\na {\n  color: inherit;\n  text-decoration: inherit;\n}\n\n/**\n * Reset form element properties that are easy to forget to\n * style explicitly so you don't inadvertently introduce\n * styles that deviate from your design system. These styles\n * supplement a partial reset that is already applied by\n * normalize.css.\n */\n\nbutton,\ninput,\noptgroup,\nselect,\ntextarea {\n  padding: 0;\n  line-height: inherit;\n  color: inherit;\n}\n\n/**\n * Use the configured 'mono' font family for elements that\n * are expected to be rendered with a monospace font, falling\n * back to the system monospace stack if there is no configured\n * 'mono' font family.\n */\n\npre,\ncode,\nkbd,\nsamp {\n  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, \"Liberation Mono\", \"Courier New\", monospace;\n}\n\n/**\n * Make replaced elements 'display: block' by default as that's\n * the behavior you want almost all of the time. Inspired by\n * CSS Remedy, with 'svg' added as well.\n *\n * https://github.com/mozdevs/cssremedy/issues/14\n */\n\nimg,\nsvg,\nvideo,\ncanvas,\naudio,\niframe,\nembed,\nobject {\n  display: block;\n  vertical-align: middle;\n}\n\n/**\n * Constrain images and videos to the parent width and preserve\n * their instrinsic aspect ratio.\n *\n * https://github.com/mozdevs/cssremedy/issues/14\n */\n\nimg,\nvideo {\n  max-width: 100%;\n  height: auto;\n}`\n\nexport default Preflight;","\n\nconst spacing: {[key: number] : string} = {\n    1: '0.25rem',\n    2: '0.5rem',\n    3: '0.75rem',\n    4: '1rem',\n    5: '1.25rem',\n    6: '1.5rem',\n    7: '1.75rem',\n    8: '2rem',\n    9: '2.25rem',\n    10: '2.5rem',\n    12: '3rem',\n    14: '3.5rem',\n    16: '4rem',\n    20: '5rem',\n    24: '6rem'\n}\n\nexport default spacing;","const radius = {\n    none: '0px',\n    sm: '3px',\n    md: '4px',\n    full: '9999px'\n}\n\nexport default radius;","const textSize = {\n    xs: '0.75rem',\n    sm: '0.875rem',\n    base: '1rem',\n    lg: '1.125rem',\n    xl: '1.25rem',\n    xxl: '1.5rem' \n}\n\nexport default textSize;","const colors = {\n    white: '#FFFFFF',\n    blueGray: {\n        50: '#F8FAFC',\n        100: '#F1F5F9',\n        200: '#E2E8F0',\n        300: '#CBD5E1',\n        400: '#94A3B8',\n        500: '#64748B',\n        600: '#475569',\n        700: '#334155',\n        800: '#1E293B',\n        900: '#0F172A'\n    },\n    coolGray: {\n        50: '#F9FAFB',\n        100: '#F3F4F6',\n        200: '#E5E7EB',\n        300: '#D1D5DB',\n        400: '#9CA3AF',\n        500: '#6B7280',\n        600: '#4B5563',\n        700: '#374151',\n        800: '#1F2937',\n        900: '#111827'\n    },\n    gray: {\n        50: '#FAFAFA',\n        100: '#F4F4F5',\n        200: '#E4E4E7',\n        300: '#D4D4D8',\n        400: '#A1A1AA',\n        500: '#71717A',\n        600: '#52525B',\n        700: '#3F3F46',\n        800: '#27272A',\n        900: '#18181B'\n    },\n    trueGray: {\n        50: '#FAFAFA',\n        100: '#F5F5F5',\n        200: '#E5E5E5',\n        300: '#D4D4D4',\n        400: '#A3A3A3',\n        500: '#737373',\n        600: '#525252',\n        700: '#404040',\n        800: '#262626',\n        900: '#171717'\n    },\n    warmGray: {\n        50: '#FAFAF9',\n        100: '#F5F5F4',\n        200: '#E7E5E4',\n        300: '#D6D3D1',\n        400: '#A8A29E',\n        500: '#78716C',\n        600: '#57534E',\n        700: '#44403C',\n        800: '#292524',\n        900: '#1C1917'\n    },\n    red: {\n        50 :'#FEF2F2',\n        100 :'#FEE2E2',\n        200 :'#FECACA',\n        300 :'#FCA5A5',\n        400 :'#F87171',\n        500 :'#EF4444',\n        600 :'#DC2626',\n        700 :'#B91C1C',\n        800 :'#991B1B',\n        900 :'#7F1D1D'\n    },\n    indigo: {\n        50 :'#EEF2FF',\n        100 :'#E0E7FF',\n        200 :'#C7D2FE',\n        300 :'#A5B4FC',\n        400 :'#818CF8',\n        500 :'#6366F1',\n        600 :'#4F46E5',\n        700 :'#4338CA',\n        800 :'#3730A3',\n        900 :'#312E81'\n    },\n    green: {\n        50 :'#ECFDF5',\n        100 :'#D1FAE5',\n        200 :'#A7F3D0',\n        300 :'#6EE7B7',\n        400 :'#34D399',\n        500 :'#10B981',\n        600 :'#059669',\n        700 :'#047857',\n        800 :'#065F46',\n        900 :'#064E3B'\n    },\n    orange: {\n        50 :'#FFFBEB',\n        100 :'#FEF3C7',\n        200 :'#FDE68A',\n        300 :'#FCD34D',\n        400 :'#FBBF24',\n        500 :'#F59E0B',\n        600 :'#D97706',\n        700 :'#B45309',\n        800 :'#92400E',\n        900 :'#78350F'\n    },\n    rose: {\n        50 :'#FFF1F2',\n        100 :'#FFE4E6',\n        200 :'#FECDD3',\n        300 :'#FDA4AF',\n        400 :'#FB7185',\n        500 :'#F43F5E',\n        600 :'#E11D48',\n        700 :'#BE123C',\n        800 :'#9F1239',\n        900 :'#881337'\n    },\n    brand: {\n        green : '#1c894a',\n        blue : '#01587d',\n        mint : '#57cc99'\n    }\n}\n\nexport default colors;","const boxShadow = {\n    sm: '0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)',\n    md: '0 4px 12px -1px rgba(0, 0, 0, 0.2), 0 2px 4px -1px rgba(0, 0, 0, 0.4)',\n    lg: '0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)',\n    xl: '0 25px 50px -12px rgba(0, 0, 0, 0.25)',\n    xlTop: '0 -25px 50px -12px rgba(0, 0, 0, 0.05)',\n    inner: 'inset 5px 5px 5px 0 rgba(0, 0, 0, 0.2)',\n    input: 'inset 0 2px 4px 0 rgba(0, 0, 0, 0.06)' \n}\n\nexport default boxShadow;","import styled from 'styled-components';\nimport {boxShadow, colors, radius, spacing} from '../../../theme';\n\n\nconst _genSelectorTheme = (color: string) => {\n    switch (color) {\n        case 'blue' :\n            return colors.brand.blue;\n        case 'mint' :\n            return colors.brand.mint;\n        case 'gray' :\n            return colors.gray[500];\n        case 'green' :\n        default :\n            return colors.brand.green;\n    }\n}\n\nconst space = 3; \n\nexport const SelectorDiv = styled.div`\n    position: relative;\n    display: inline-flex;\n    align-items: stretch;\n    margin-right: ${spacing[12]};\n    `\nexport const SelectorMenu = styled.div`\n    padding: ${spacing[space]};\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    background: ${props => props.color ? _genSelectorTheme(props.color) : colors.brand.green};\n    svg, path {\n        stroke: ${colors.white};\n    }    \n`\nexport const SelectorTitle = styled.div`\n background: ${props => props.color ? _genSelectorTheme(props.color) : colors.brand.green};\n padding: ${spacing[space]} ${spacing[space * 4]} ${spacing[space]} ${spacing[space]};\n flex: 1 1 auto;\n color: ${colors.white};\n`\nexport const SelectorArrows = styled.div`\n    display: flex;\n    svg, path {\n        fill: ${colors.white};\n    }\n`\nexport const SelectorArrow = styled.div`\n background: ${props => props.color ? _genSelectorTheme(props.color) : colors.brand.green};\n display: flex;\n align-items: center;\n justify-content: center;\n cursor: pointer;\n width: ${spacing[12]};\n svg {\n    transition: 250ms ease-out;\n }\n &:hover {\n     svg {\n         transform: scale(1.2);\n     }\n }\n &.prev {\n    position: relative;\n    margin-left: ${spacing[space]};\n }\n &.prev::after {\n     content: '';\n     display: block;\n     position: absolute;\n     right: -1px;\n     width: 2px;\n     height: 50%;\n     background: ${colors.white};\n    }\n &.next {\n }\n`\n\nexport const SelectorList = styled.ul`\n position: absolute;\n left: 0; right: 0; top: 0; bottom: auto;\n display: none;\n transform: translateY(calc((100% + ${spacing[3]}) * -1));\n box-shadow: ${boxShadow.xlTop}, ${boxShadow.lg};\n margin-bottom: ${spacing[3]};\n transition: 250ms ease-out;\n &.expanded {\n     display: block;\n }\n `\n export const SelectorListItem = styled.li`\n display: flex;\n justify-content: space-between;\n align-items: center;\n background-color: ${colors.white};\n padding: ${spacing[3]};\n color: ${colors.brand.blue};\n border-bottom: 1px solid ${colors.gray[200]};\n cursor: pointer;\n transition: 250ms ease-out;\n &:hover {\n     padding-left: ${spacing[4]};\n     background: ${colors.gray[50]};\n }\n\n &:last-child {\n     border-bottom: 0;\n }\n    svg {\n     fill: ${colors.brand.blue};\n     stroke: ${colors.brand.blue};   \n    }\n`","import styled from 'styled-components';\n\nexport const IconDiv = styled.div`\n    \n`","import React from 'react';\nimport {IconDiv} from './styles/IconStyles';\nimport { IconProps } from './types';\n\nconst svgs = {\n    left: <svg fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" width=\"10\" height=\"10\" viewBox=\"0 0 15 15\">\n        <path d=\"M12,13.45a.62.62,0,0,0,.09-.32V1.88A.63.63,0,0,0,12,1.55a.59.59,0,0,0-.24-.23.64.64,0,0,0-.33-.07.72.72,0,0,0-.32.11L3,7a.53.53,0,0,0-.2.22.64.64,0,0,0,0,.58A.53.53,0,0,0,3,8l8.12,5.63a.72.72,0,0,0,.32.11.64.64,0,0,0,.33-.07A.59.59,0,0,0,12,13.45Z\"/>\n    </svg>,  \n    right:  <svg width=\"10\" height=\"10\" viewBox=\"0 0 15 15\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M3.46 13.6788C3.5611 13.7313 3.67462 13.7554 3.78836 13.7484C3.90211 13.7413 4.01179 13.7034 4.10562 13.6388L12.2306 8.01375C12.3136 7.95623 12.3815 7.87945 12.4284 7.78998C12.4752 7.7005 12.4997 7.60101 12.4997 7.5C12.4997 7.399 12.4752 7.2995 12.4284 7.21003C12.3815 7.12056 12.3136 7.04377 12.2306 6.98625L4.10562 1.36125C4.01186 1.29637 3.90213 1.25838 3.78832 1.25139C3.67451 1.2444 3.56096 1.26867 3.45996 1.32159C3.35895 1.3745 3.27435 1.45404 3.21531 1.55159C3.15627 1.64914 3.12504 1.76098 3.125 1.875V13.125C3.12498 13.2391 3.15619 13.351 3.21524 13.4486C3.27429 13.5462 3.35894 13.6258 3.46 13.6788Z\" fill=\"black\"/>\n    </svg>,\n    menu: <svg width=\"28\" height=\"21\" viewBox=\"0 0 28 21\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M4.8125 6.23438H23.1875\" stroke=\"black\" strokeWidth=\"2\" strokeMiterlimit=\"10\" strokeLinecap=\"round\"/>\n    <path d=\"M4.8125 10.5H23.1875\" stroke=\"black\" strokeWidth=\"2\" strokeMiterlimit=\"10\" strokeLinecap=\"round\"/>\n    <path d=\"M4.8125 14.7656H23.1875\" stroke=\"black\" strokeWidth=\"2\" strokeMiterlimit=\"10\" strokeLinecap=\"round\"/>\n    </svg>,\n    check: <svg width=\"12\" height=\"10\" viewBox=\"0 0 9 8\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M6.97001 0.969986C7.11087 0.835875 7.29833 0.761733 7.49282 0.763205C7.68732 0.764677 7.87363 0.841647 8.01245 0.977874C8.15127 1.1141 8.23175 1.29893 8.23689 1.49336C8.24203 1.68779 8.17143 1.87661 8.04001 2.01999L4.05001 7.00999C3.9814 7.08389 3.89859 7.14319 3.80654 7.18435C3.71448 7.22552 3.61508 7.2477 3.51426 7.24956C3.41344 7.25143 3.31328 7.23295 3.21976 7.19522C3.12625 7.15749 3.0413 7.10129 2.97001 7.02999L0.324005 4.38399C0.250318 4.31532 0.191216 4.23252 0.150224 4.14052C0.109232 4.04853 0.0871901 3.94921 0.0854134 3.84851C0.0836366 3.74781 0.102161 3.64778 0.139882 3.55439C0.177603 3.461 0.233748 3.37617 0.304967 3.30495C0.376186 3.23373 0.461019 3.17758 0.554407 3.13986C0.647796 3.10214 0.747825 3.08362 0.848528 3.08539C0.949231 3.08717 1.04854 3.10921 1.14054 3.15021C1.23254 3.1912 1.31534 3.2503 1.384 3.32399L3.47801 5.41699L6.95101 0.991987C6.95726 0.984288 6.96393 0.976943 6.971 0.969986H6.97001Z\" fill=\"black\"/>\n    </svg>\n    \n}\n\nconst Icon: React.FC<IconProps> = ({icon}) => {\n    return (\n        <IconDiv>\n            {svgs[icon]}\n        </IconDiv>\n    );\n};\n\nexport default Icon;","import React, {useState} from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport {SelectorDiv, SelectorMenu, SelectorListItem, SelectorTitle, SelectorArrows, SelectorArrow, SelectorList} from './styles/SelectorStyles';\nimport {productSetTextureToActive} from '../../store/product/actions';\nimport { SelectorProps } from './types';\nimport { getActiveSection } from '../../store/product/selectors';\nimport Icon from '../Icon';\nimport { map } from 'lodash';\n\nconst Selector: React.FC<SelectorProps> = ({type, color = 'green'}) => {\n    \n    const dispatch = useDispatch();\n    /**\n     * Data\n     */\n\n    const [activeSection] = useSelector(getActiveSection);\n    const [menuOpen, setMenuOpen] = useState<boolean>(false);\n\n    const {\n        current_material: CURRENT,\n        available_materials: AVAILABLE\n    }\n    = activeSection;\n\n    /**\n     * Methods\n     */\n\n     const _handleCycleSelector = (direction: '<' | '>') => {\n    \n        let idx = AVAILABLE.findIndex((avail: any) => avail.uid === CURRENT.uid);\n        \n           switch(direction)\n           {\n            case '<' :\n                idx = idx === 0 ? AVAILABLE.length - 1 : idx - 1;\n                break;\n            case '>' :\n                idx = idx === AVAILABLE.length - 1 ? 0 : idx + 1;\n                break;\n            default:\n            break;\n           }\n\n        dispatch(productSetTextureToActive(AVAILABLE[idx].uid));\n     }\n\n     const _renderSelectorListItems = () => {\n\n        return AVAILABLE.map((material) => {\n            if (CURRENT.uid === material.uid) {\n                return (\n                    <SelectorListItem key={material.uid}>\n                        {material.label}\n                        <Icon icon={'check'} />\n                    </SelectorListItem>\n                )\n            }\n            return (\n                <SelectorListItem key={material.uid} onClick={() => {\n                    dispatch(productSetTextureToActive(material.uid));\n                    _handleToggleMenu();\n                    }\n                }>\n                    {material.label} <span />\n                </SelectorListItem>\n            )\n        });\n     }\n\n    const _handleToggleMenu = () => {\n        setMenuOpen(prev => !prev);\n    } \n    \n     if (!AVAILABLE.length)\n        return null;\n    \n    return (\n        <SelectorDiv color={color}>\n            <SelectorList className={menuOpen ? 'expanded' : ''}>\n               {_renderSelectorListItems()}\n            </SelectorList>\n            <SelectorMenu color={color} onClick={() => _handleToggleMenu()}>\n                <Icon icon={'menu'} />\n            </SelectorMenu>\n            <SelectorTitle color={color}>\n                Materials / {CURRENT.label}\n            </SelectorTitle>\n            <SelectorArrows>\n                <SelectorArrow color={color} className={'prev'} onClick={() => _handleCycleSelector('<')} >\n                    <Icon icon={'left'} />\n                </SelectorArrow>\n                <SelectorArrow color={color} className={'next'} onClick={() => _handleCycleSelector('>')} >\n                    <Icon icon={'right'} />\n                </SelectorArrow>\n            </SelectorArrows>\n        </SelectorDiv>\n    );\n};\n\nexport default Selector;","import React, {useState} from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport {SelectorDiv, SelectorMenu, SelectorListItem, SelectorTitle, SelectorArrows, SelectorArrow, SelectorList} from '../Selector/styles/SelectorStyles';\nimport {productSetActivePart, productSetColorToActive} from '../../store/product/actions';\nimport config from '../../config/brandConfig';\nimport { SectionSelectorProps } from './types';\nimport { getAllSections } from '../../store/product/selectors';\nimport Icon from '../Icon';\n\nconst SectionSelector: React.FC<SectionSelectorProps> = ({color = 'green'}) => {\n    \n    const dispatch = useDispatch();\n    /**\n     * Data\n     */\n    const sections = useSelector(getAllSections);\n    const [activeSection] = sections.filter(s => s.active);\n    const [menuOpen, setMenuOpen] = useState<boolean>(false);\n    // Disable stops the user from clicking on the item until the color has returned to default\n    // This stops the user being able to lock in the hoverColor\n    const [disabled, setDisabled] = useState(false);\n\n    const CURRENT = activeSection;\n    const AVAILABLE = sections.filter(s => !s.locked);\n\n    /**\n     * Methods\n     */\n\n     const _handleCycleSelector = (direction: '<' | '>') => {\n    \n        let idx = AVAILABLE.findIndex((avail: any) => avail.tag === CURRENT.tag);\n        \n           switch(direction)\n           {\n            case '<' :\n                idx = idx === 0 ? AVAILABLE.length - 1 : idx - 1;\n                break;\n            case '>' :\n                idx = idx === AVAILABLE.length - 1 ? 0 : idx + 1;\n                break;\n            default:\n            break;\n           }\n        \n           if (!disabled) {\n                const color = AVAILABLE[idx].color;\n                dispatch(productSetActivePart(AVAILABLE[idx].meshPart));\n                dispatch(productSetColorToActive(config.hoverColor));\n                setTimeout(() => {\n                    dispatch(productSetColorToActive(color));\n                    setDisabled(false);\n                }, 200);\n            }\n     }\n\n     const _handleToggleMenu = () => {\n         setMenuOpen(prev => !prev);\n     } \n\n     const _renderSelectorListItems = () => {\n\n        return AVAILABLE.map((section) => {\n            if (CURRENT.tag === section.tag) {\n                return (\n                    <SelectorListItem key={section.tag}>\n                        {section.label}\n                        <Icon icon={'check'} />\n                    </SelectorListItem>\n                )\n            }\n            return (\n                <SelectorListItem key={section.tag} onClick={() => {\n                    if (!disabled) {\n                        const color = section.color;\n                        _handleToggleMenu();\n                        dispatch(productSetActivePart(section.meshPart));\n                        dispatch(productSetColorToActive(config.hoverColor));\n                        setTimeout(() => {\n                            dispatch(productSetColorToActive(color));\n                            setDisabled(false);\n                        }, 200);\n                        }\n                    }\n                }\n                >\n                    {section.label} <span />\n                </SelectorListItem>\n            )\n        });\n     }\n\n    \n     if (!AVAILABLE.length)\n        return null;\n    \n    return (\n        <SelectorDiv color={color}>\n            <SelectorList className={menuOpen ? 'expanded' : ''}>\n               {_renderSelectorListItems()}\n            </SelectorList>\n            <SelectorMenu color={color} onClick={() => _handleToggleMenu()}>\n                <Icon icon={'menu'} />\n            </SelectorMenu>\n            <SelectorTitle color={color}>\n                {CURRENT.label}\n            </SelectorTitle>\n            <SelectorArrows>\n                <SelectorArrow color={color} className={'prev'} onClick={() => _handleCycleSelector('<')} >\n                    <Icon icon={'left'} />\n                </SelectorArrow>\n                <SelectorArrow color={color} className={'next'} onClick={() => _handleCycleSelector('>')} >\n                    <Icon icon={'right'} />\n                </SelectorArrow>\n            </SelectorArrows>\n        </SelectorDiv>\n    );\n};\n\nexport default SectionSelector;","import styled from 'styled-components';\nimport { ControlPanelProps } from '../types';\n// import {colors, radius, spacing} from '../../../theme';\n\nexport const ControlPanelDiv = styled.div<ControlPanelProps>`\n    position: fixed;\n    bottom: 0; left: 0; right: 0;\n    z-index: 10;\n`","import React from 'react';\nimport {ControlPanelDiv} from './styles/ControlPanelStyles';\nimport { ControlPanelProps } from './types';\n\nconst ControlPanel: React.FC<ControlPanelProps> = ({children}) => {\n    return (\n        <ControlPanelDiv>{children}</ControlPanelDiv>\n    );\n};\n\nexport default ControlPanel;","import styled from 'styled-components';\nimport { ImageEditorProps } from '../types';\nimport {colors, radius, spacing} from '../../../theme';\n\nexport const ImageEditorDiv = styled.div<ImageEditorProps>`\n    box-shadow: 0 0 10px rgba(0,0,0,0.5);\n    background: ${colors.gray[100]};\n    padding: ${spacing[3]};\n`\nexport const ImageEditorButtonTrayDiv = styled.div`\n    display: flex;\n    justify-content: space-between;\n    margin-top: ${spacing[4]};\n`","import styled from 'styled-components';\nimport {colors, radius, spacing, textSize, boxShadow} from '../../../theme';\n\nexport const UploadArea = styled.div<{draggingOver: boolean}>`\n    background-color: ${colors.gray[100]};\n    border-radius: ${radius.sm};\n    padding: 0 ${spacing[24]};\n    height: 480px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    position: relative;\n    color: ${colors.brand.green};\n    text-align: center;\n    overflow: hidden;\n    * {\n        position: relative;\n        z-index: 2;\n    }\n    &:before {\n        content: '';\n        display: block;\n        position: absolute;\n        z-index: 1;\n        border: 2px dashed ${({draggingOver}) => draggingOver ? colors.brand.green : colors.brand.mint};\n        border-radius: ${radius.sm};\n        top: ${spacing[4]};\n        left: ${spacing[4]};\n        bottom: ${spacing[4]};\n        right: ${spacing[4]};\n        transition: border 0.25 ease-out;\n    };\n`\n\nexport  const LabelPill = styled.label`\nbackground-color: ${colors.brand.green};\ndisplay: inline-block;\ncursor: pointer;\ncolor: ${colors.white};\npadding: ${spacing[2]} ${spacing[3]};\nline-height: 1;\nmargin: ${spacing[1]};\nfont-size: ${textSize.sm};\ntransition: transform 0.25 ease-out;\n&:hover {\n    box-shadow: ${boxShadow.sm};\n    transform: translateY(-1px);\n}\n&:active {\n    box-shadow: ${boxShadow.input};\n    transform: translateY(0);\n}\n`\n\nexport const ErrorPanel = styled.div`\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    padding: ${spacing[3]};\n    background-color: ${colors.rose[500]};\n    color: ${colors.white};\n    text-center;\n    font-weight: medium;\n    font-size: ${textSize.sm};\n    animation: slideOut 0.5s ease-out 3s forwards;\n\n    @keyframes slideOut {\n        from {\n            top: 0\n        }\n        to {\n            top: -100px;\n        }\n    }\n`","import React from 'react';\nimport {LabelPill} from './styles/ImageUploadStyles';\n\ninterface UploadFormletInterface {\n    onClick: () => void;\n    handleUpload: (files: FileList) => void;\n    error: string | false;\n}\n\nconst UploadFormlet: React.FC<UploadFormletInterface> = ({handleUpload, onClick}) => {\n\n    const handleClick = (e: React.MouseEvent<HTMLInputElement, MouseEvent>) => {\n        const element = e.target as HTMLInputElement;\n        element.value = '';\n        onClick();\n    }\n\n    return (\n        <>\n            <input\n            onClick={(e) => handleClick(e)}\n            onChange={ (e) => handleUpload((e.target.files as FileList))}\n            type=\"file\" id=\"BtnBrowseHidden\" name=\"files\" style={{display: 'none'}} />\n            <LabelPill htmlFor=\"BtnBrowseHidden\">\n                Upload file\n            </LabelPill>\n        </>\n    );\n};\n\nexport default UploadFormlet;","import React, {useState} from 'react';\nimport UploadFormlet from './UploadFormlet';\nimport {UploadArea, ErrorPanel} from './styles/ImageUploadStyles';\n\ninterface ImageUploadInterface {\n    handleFileUpload: (files: FileList) => void;\n    error: string | false;\n    clearError: () => void;\n}\n\nconst ImageUpload: React.FC<ImageUploadInterface> = ({error, handleFileUpload, clearError}) => {\n\n    const [draggingOver, setDraggingOver] = useState<boolean>(false);\n    \n    const dragOver = (e: React.DragEvent<HTMLDivElement>) => {\n        clearError();\n        e.preventDefault();\n    }\n    \n    const dragEnter = (e: React.DragEvent<HTMLDivElement>) => {\n        e.preventDefault();\n        setDraggingOver(true);\n    }\n    \n    const dragLeave = (e: React.DragEvent<HTMLDivElement>) => {\n        e.preventDefault();\n        setDraggingOver(false);\n    }\n    \n    const fileDrop = (e: React.DragEvent<HTMLDivElement>) => {\n        e.preventDefault();\n        const files = e.dataTransfer.files;\n        setDraggingOver(false);\n        handleFileUpload(files);\n    }\n\n    return (\n        <UploadArea\n        onDragOver={dragOver}\n        onDragEnter={dragEnter}\n        onDragLeave={dragLeave}\n        onDrop={fileDrop}\n        draggingOver={draggingOver}\n        >\n            {error ? <ErrorPanel>{error}</ErrorPanel> : ''}\n            <p><UploadFormlet error={error} onClick={clearError} handleUpload={handleFileUpload} /> or drop image here.</p>\n        </UploadArea>\n    );\n};\n\nexport default ImageUpload;","import React, {useState} from 'react';\nimport ImageUpload from './ImageUpload';\n\ninterface UploadError {\n    type: 'error';\n    message: string;\n}\n\n const handleAllowedFiles = (file: File): UploadError | File => {\n    if (/\\.(jpe?g|png)$/i.test(file.name) === false )\n        return {type: 'error', 'message': 'Sorry, the file must be a JPEG or PNG.'};\n\n    if (file.size * 1e-6 > 2)\n        return {type: 'error', message: 'Sorry, the file must be below 2MB'};\n\n    return file;\n}\n\n\nconst UploadContainer: React.FC<{uploadImage: (url: string) => void}> = ({uploadImage}) => {\n\n    const [error, setError] = useState<string | false>(false);\n    \n    const convertToBlob = (files: FileList) => {\n        \n        \n        const file = handleAllowedFiles(files[0]);\n        if (!file)\n            return false;\n\n        if (!(file instanceof File) && file.hasOwnProperty('type') && file.type === 'error') {   \n            setError(file.message);\n            return false;\n        }\n            \n        const url = URL.createObjectURL(file);\n        uploadImage(url); \n    }\n\n    return (\n        <ImageUpload\n        error={error}\n        clearError={() => setError(false)}\n        handleFileUpload={convertToBlob}\n        />\n    );\n};\n\nexport default UploadContainer;","import styled from 'styled-components';\nimport {colors, spacing, textSize} from '../../../theme';\n\ninterface ButtonDivProps {\n    big?: boolean;\n}\n\nconst _genButtonTheme = (color: string) => {\n    switch (color) {\n        case 'blue' :\n            return colors.brand.blue;\n        case 'mint' :\n            return colors.brand.mint;\n        case 'minimal':\n            return colors.gray[500];\n        case 'gray' :\n            return colors.gray[200];\n        case 'green' :\n        default :\n            return colors.brand.green;\n    }\n}\n\nexport const ButtonEl = styled.button<ButtonDivProps>`\n    padding: ${props => props.big ? `${spacing[3]} ${spacing[6]}` : `${spacing[1]} ${spacing[3]}`};\n    background: ${props => props.color ? _genButtonTheme(props.color) : colors.brand.green};\n    color: ${props => props.color === 'gray' ? colors.gray[500] : colors.white};\n\n    &.minimal {\n        background: transparent;\n        color: ${props => props.color ? _genButtonTheme('minimal') : colors.brand.green};\n        font-size: ${textSize.sm};\n    }\n`","import React from 'react';\nimport {ButtonEl} from './styles/ButtonStyles';\nimport { ButtonProps } from './types';\n\nconst Button: React.FC<ButtonProps> = ({children, color = 'green', minimal, onClick, big}) => {\n    return (\n        <ButtonEl big={big} color={color} onClick={e => onClick && onClick(e)} className={minimal ? 'minimal' : ''}>{children}</ButtonEl>\n    );\n};\n\nexport default Button;","import styled from 'styled-components';\nimport { ModalProps } from '../types';\nimport {colors, radius, spacing} from '../../../theme';\n\nexport const ModalDiv = styled.div<ModalProps>`\n    position: fixed;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    top: 0; left: 0; right: 0; bottom: 0;\n    backdrop-filter: blur(5px);\n    z-index: 999999;\n    &.hidden {\n        display: none;\n    }\n`\n\nexport const ModalInnerDiv = styled.div`\n\n`","import React from 'react';\nimport {ModalDiv, ModalInnerDiv} from './styles/ModalStyles';\nimport { ModalProps } from './types';\n\nconst Modal: React.FC<ModalProps> = ({children, isOpen}) => {\n    return (\n        <ModalDiv className={isOpen ? '' : 'hidden'}>\n            <ModalInnerDiv>\n                {children}\n            </ModalInnerDiv>\n        </ModalDiv>\n    );\n};\n\nexport default Modal;","import React, { useEffect, useState } from 'react';\nimport uuid from 'react-uuid';\nimport {fabric} from 'fabric';\nimport {ImageEditorDiv, ImageEditorButtonTrayDiv} from './styles/ImageEditorStyles';\nimport { ImageEditorProps } from './types';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { getProductCustomImage } from '../../store/product/selectors';\nimport { productApplyCustomImage, productSetCustomImage, productClearCustomImage, destroyCustomTextureFromActive } from '../../store/product/actions';\nimport ImageUpload from '../ImageUpload';\nimport Button from '../Button';\nimport Modal from '../../layout/Modal';\nimport { interfaceToggleModal } from '../../store/interface/actions';\nimport { interfaceGetModalState } from '../../store/interface/selectors';\n\nconst ImageEditor: React.FC<ImageEditorProps> = () => {\n    \n    const dispatch = useDispatch();\n    const [editor, setEditor] = useState<any>(null);\n    const uniq = uuid();\n    const dimensions = 480;\n    const canvasPadding = 10; // Relates to image size vs canvas size\n    const customImageUrl = useSelector(getProductCustomImage);\n    const modalState = useSelector(interfaceGetModalState('customImage'));\n\n    /**\n     * Instance setup\n     */\n\n    useEffect(() => {\n            const canvas = new fabric.Canvas(\n                `image-editor-${uniq}`,\n                {backgroundColor: \"#FFFFFF\"}\n            );\n            canvas.setDimensions({width:dimensions, height:dimensions});\n            setEditor(canvas);\n\n            return () => {\n                if (editor) {\n                    editor.dispose();\n                    setEditor(null);\n                    }\n                }\n    }, [customImageUrl]);\n\n    /**\n     * Add image\n     */\n\n    useEffect(() => {\n        if (editor && customImageUrl)\n        {\n            fabric.Image.fromURL(customImageUrl, image => {\n                const customImage = image.set({left: canvasPadding, top: canvasPadding});\n                customImage.scaleToWidth(dimensions - (canvasPadding * 2));\n                editor.add(customImage);\n            })\n        }\n    }, [editor, customImageUrl]);\n\n    /**\n     * Methods\n     */\n\n     const _handleCloseCustomImageModal = () => {\n        dispatch(interfaceToggleModal({id: 'customImage', status: 'closed'}));;\n    }\n\n    const _generateCustomTexture = () => {\n        const texture = editor.toDataURL({multiplier: 1024 / dimensions});\n        _handleCloseCustomImageModal();\n        fetch(texture)\n        .then(res => res.blob())\n        .then(window.URL.createObjectURL)\n        .then(objectUrl => dispatch(productApplyCustomImage(objectUrl)))\n    }\n    \n    const _handleUpload = (url: string) => {\n        dispatch(productSetCustomImage(url));\n    }\n\n    /**\n     * Clear: Clear the image editor, but keep the texture on the active section\n     */\n\n    const _clearCustomTexture = () => {\n        if (editor) editor.dispose();\n        setEditor(null);\n        dispatch(productClearCustomImage());\n    }\n\n    /**\n     * Clear the image editor, and REMOVE the texture on the active section\n     */\n\n    const _destroyCustomTexture = () => {\n        _handleCloseCustomImageModal();\n        dispatch(destroyCustomTextureFromActive());\n    }\n\n\n\n    const _renderContent = () => {\n        if (customImageUrl)\n        return (\n                <ImageEditorDiv>\n                    <canvas id={`image-editor-${uniq}`} />\n                    <ImageEditorButtonTrayDiv>\n                        <div>\n                            <Button color={'green'} onClick={_generateCustomTexture}>Confirm</Button>\n                            <Button color={'mint'} onClick={_clearCustomTexture}>Clear Editor</Button>\n                        </div>\n                        \n                        <div>\n                            <Button color={'gray'} onClick={_handleCloseCustomImageModal}>Close</Button>\n                            <Button color={'gray'} minimal onClick={_destroyCustomTexture}>Remove Texture</Button>\n                        </div>\n                    </ImageEditorButtonTrayDiv>\n                </ImageEditorDiv>  \n        );\n    \n        return (\n                <ImageEditorDiv>\n                    <ImageUpload uploadImage={_handleUpload} />\n                        <ImageEditorButtonTrayDiv>\n                            <span />\n                            <div>\n                                <Button color={'gray'} onClick={_handleCloseCustomImageModal}>Close</Button>\n                                <Button color={'gray'} minimal onClick={_destroyCustomTexture}>Remove Texture</Button>\n                            </div>\n                        </ImageEditorButtonTrayDiv>\n                </ImageEditorDiv>\n        );\n    }\n\n    return (\n       <Modal isOpen={modalState === 'open'}>\n           {_renderContent()}\n       </Modal> \n    );    \n};\n\nexport default ImageEditor;","import styled from 'styled-components';\nimport { SelectorTrayProps } from '../types';\nimport {spacing} from '../../../theme';\n\nexport const SelectorTrayDiv = styled.div<SelectorTrayProps>`\n    display: flex;\n    align-items: center;\n    padding: ${spacing[12]};\n`","import React from 'react';\nimport {SelectorTrayDiv} from './styles/SelectorTrayStyles';\nimport { SelectorTrayProps } from './types';\n\nconst SelectorTray: React.FC<SelectorTrayProps> = ({children}) => {\n    return (\n        <SelectorTrayDiv>{children}</SelectorTrayDiv>\n    );\n};\n\nexport default SelectorTray;","import React, {Suspense, useEffect} from 'react';\nimport {useDispatch, useSelector} from 'react-redux';\nimport World from '../World';\nimport {thunkProductLoadMaterials, thunkProductLoadModel} from '../../store/product/thunks';\nimport {getProductModelPath} from '../../store/product/selectors';\nimport SwatchTray from '../SwatchTray';\nimport Selector from '../Selector';\nimport SectionSelector from '../SectionSelector';\nimport ControlPanel from '../../layout/ControlPanel';\nimport ImageEditor from '../ImageEditor';\nimport SelectorTray from '../../layout/SelectorTray';\nimport Button from '../Button';\nimport { interfaceToggleModal } from '../../store/interface/actions';\n\nconst App: React.FC = () => {\n\n    \n    const dispatch = useDispatch();\n    const MODEL_PATH = useSelector(getProductModelPath);\n    \n    useEffect(() => {\n        dispatch(thunkProductLoadMaterials());\n        dispatch(thunkProductLoadModel());\n    }, [dispatch]);\n\n    const _handleOpenCustomModal = () => {\n        dispatch(interfaceToggleModal({id: 'customImage', status: 'open'}));\n    }\n\n    if (!MODEL_PATH)\n        return <p>Fetching data...</p>\n        \n    return (\n        <Suspense fallback={<p>Building world...</p>}>\n            <ImageEditor />\n            <ControlPanel>\n                <SelectorTray>\n                    <SectionSelector color={'blue'} />\n                    <Selector type={`material`} />\n                    <Button big onClick={_handleOpenCustomModal}>\n                        Custom image\n                    </Button>\n                </SelectorTray>\n                <SwatchTray />\n            </ControlPanel>\n                <World model={MODEL_PATH} />\n        </Suspense>\n    )\n}\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport {store} from './store';\nimport App from './components/App';\nimport {Preflight} from './theme';\n\nReactDOM.render(\n  <React.StrictMode>\n      <Preflight />\n      <Provider store={store}>\n        <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}